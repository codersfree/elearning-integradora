<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/instructor}">

<head>
    <title>Mis Cursos - Instructor</title>
    <meta name="description" content="Gestiona tus cursos de desarrollo web online.">
</head>

<body>

    <div layout:fragment="content">

        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="h2 text-dark fw-bold mb-0">
                Mis Cursos
            </h1>
            <a th:href="@{/instructor/courses/create}" class="btn btn-danger px-4 shadow-sm">
                Crear Nuevo Curso
            </a>
        </div>

        <div th:if="${courses.content.isEmpty()}" class="alert alert-secondary text-center p-5 shadow-sm border-0">
            Aún no has creado ningún curso. ¡Empieza ahora!
        </div>

        <div th:if="${!courses.content.isEmpty()}" class="vstack gap-4 mb-4">

            <div th:each="course : ${courses.content}" class="card shadow-sm border-0 overflow-hidden">
                <div class="row g-0">

                    <div class="col-md-3">
                        <div class="ratio ratio-16x9 h-100">
                            <img th:src="${course.image}" 
                                 alt="Imagen del Curso" 
                                 class="img-fluid object-fit-cover w-100 h-100">
                        </div>
                    </div>

                    <div class="col-md-9">
                        <div class="card-body p-4 d-flex flex-column h-100">
                            <div class="row">

                                <div class="col-lg-7">
                                    <h2 class="h5 card-title fw-bold text-dark mb-2">
                                        <a th:href="@{/instructor/courses/{slug}/edit(slug=${course.slug})}"
                                           class="text-decoration-none text-dark" th:text="${course.name}">
                                            Nombre del Curso
                                        </a>
                                    </h2>

                                    <span class="badge"
                                          th:text="${course.status.name() == 'DRAFT' ? 'BORRADOR' : 'PUBLICADO'}"
                                          th:classappend="${course.status.name() == 'DRAFT'} ? 'bg-danger-subtle text-danger-emphasis' : 'bg-success-subtle text-success-emphasis'">
                                        ESTADO
                                    </span>

                                    <div class="mt-3 text-muted small">
                                        <p class="mb-0">
                                            USD <span class="fw-semibold text-dark" th:text="${course.earningsThisMonth}">0.00</span> Ganado este mes
                                        </p>
                                        <p class="mb-0">
                                            USD <span class="fw-semibold text-dark" th:text="${course.totalEarnings}">0.00</span> Ganado en total
                                        </p>
                                    </div>
                                </div>

                                <div class="col-lg-5 text-lg-end mt-3 mt-lg-0">
                                    
                                    <div class="text-muted mb-2">
                                        <span class="fw-semibold text-dark" th:text="${course.enrollmentsCountThisMonth}">0</span> Inscripciones este mes
                                    </div>

                                    <div class="text-warning mb-3">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                    </div>

                                    <a th:href="@{/instructor/courses/{slug}/edit(slug=${course.slug})}"
                                       class="btn btn-outline-secondary btn-sm">
                                        <i class="bi bi-pencil-fill me-1"></i> Editar
                                    </a>

                                </div>

                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>

         <div th:replace="~{fragments/pagination :: pagination(page=${courses}, baseUrl='/instructor')}"></div>

    </div>

</body>
</html>